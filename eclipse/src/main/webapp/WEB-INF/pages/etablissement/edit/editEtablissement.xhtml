<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
	 xmlns:p="http://primefaces.prime.com.tr/ui"
	 xmlns:c="http://java.sun.com/jsp/jstl/core"
     template="/WEB-INF/pages/template/template.xhtml">
     
     <ui:define name="title">
		<h:outputFormat value="#{resourceBundle['gestionEtablissement.title']}"/>
     </ui:define>
     
     <ui:define name="body"> 
		 
		 <h:form id="editEtablissement">
		     <p:panel id="panel" header="#{resourceBundle['gestionEtablissement.etablissement']}" >
		     	 <p:focus />
		         <p:messages/>
		         
		       <h:panelGrid width="50%" columns="2" cellpadding="4" cellspacing="0"
		border="0" columnClasses="panelCol_45,panelCol_55">
		         
		             <h:outputLabel styleClass="mandatory" id="nomLabel" for="nom" value="#{resourceBundle['gestionEtablissement.nom']}"/>
		             <h:inputText id="nom" value="#{etablissementManager.bean.nom}" required="true" requiredMessage="#{resourceBundle['etablissement.nom.notEmpty']}"/>

		             <h:outputLabel id="telephoneLabel" for="telephone" value="#{resourceBundle['gestionEtablissement.telephone']}"/>
		             <h:inputText id="telephone" value="#{etablissementManager.bean.telephone}"/>
		               
		             <h:outputLabel id="faxLabel" for="fax" value="#{resourceBundle['gestionEtablissement.fax']}"/>
		             <h:inputText id="fax" value="#{etablissementManager.bean.fax}"/>
		               
		             <h:outputLabel id="mailLabel" for="mail" value="#{resourceBundle['gestionEtablissement.mail']}"/>
		             <h:inputText id="mail" value="#{etablissementManager.bean.mail}"/>
		               
		             <h:outputLabel id="adresseDirectionLabel" for="adresseDirection" value="#{resourceBundle['gestionEtablissement.adresseDirection']}"/>
		             <h:inputTextarea id="adresseDirection" value="#{etablissementManager.bean.adresseDirection}"
		             	rows="#{resourceBundle['textarea.rows.default']}" cols="42" />
		             
		             <h:outputLabel id="codePostalLabel" for="codePostal" value="#{resourceBundle['gestionEtablissement.codePostal']}"/>
		             <h:inputText size="45" id="codePostal" value="#{etablissementManager.bean.codePostal}"/>

		             <h:outputLabel id="villeLabel" for="ville" value="#{resourceBundle['gestionEtablissement.ville']}"/>
		             <h:inputText id="ville" value="#{etablissementManager.bean.ville}"/>
		               
		             <h:outputLabel id="paysLabel" for="pays" value="#{resourceBundle['gestionEtablissement.pays']}"/>
		             <h:inputText id="pays" value="#{etablissementManager.bean.pays}"/>
		               
		         </h:panelGrid>
		         
		         <br/>
		         
		         <!-- Liste des pharmacies liees -->
		         <p:panel header="#{resourceBundle['gestionEtablissement.pharmacies']}" style="width:100%;">
		         	<p:dataTable style="width:100%;" id="pharmacies" styleClass="tabContacts" value="#{etablissementManager.getList('pharmacies', true)}" var="pharmacie" emptyMessage="#{resourceBundle['results.none']}" 
						selection="#{pharmaciesManager.beanSelected}" selectionMode="single" update="pharmacies"
						onselectComplete="javascript:document.forms['hiddenForm'].editPharmacie.click();">	   
				       	<p:column id="nom" styleClass="panelCol_30">
							<f:facet name="header">
								<h:outputText value="#{resourceBundle['gestionPharmacie.nom']}"/>
							</f:facet>
							<h:outputText value="#{pharmacie.nom}"/>
					   	</p:column>
				       	<p:column id="adresse" styleClass="panelCol_30">
							<f:facet name="header">
								<h:outputText value="#{resourceBundle['gestionPharmacie.adresse']}"/>
							</f:facet>
							<h:outputText value="#{pharmacie.adresse}"/>
					   	</p:column>
				       	<p:column id="telephone" styleClass="panelCol_20">
							<f:facet name="header">
								<h:outputText value="#{resourceBundle['gestionPharmacie.telephone']}"/>
							</f:facet>
							<h:outputText value="#{pharmacie.telephone}"/>
					   	</p:column>
				       	<p:column id="responsablePrincipal" styleClass="panelCol_20">
							<f:facet name="header">
								<h:outputText value="#{resourceBundle['gestionPharmacie.responsablePrincipal']}"/>
							</f:facet>
							<h:outputText value="#{pharmacie.responsablePrincipal}"/>
					   	</p:column>
					</p:dataTable>
				</p:panel>	
		     </p:panel>  
		   	<br />
		   	<div class="actionButton">
    			<p:commandButton id="saveButton" action="save" ajax="false" value="#{resourceBundle['btn.enregistrer']}" title="#{resourceBundle['btn.enregistrer']}"/>
	   			<p:commandButton id="cancelButton" immediate="true" action="cancel" ajax="false" value="#{resourceBundle['btn.annuler']}" title="#{resourceBundle['btn.annuler']}"/>
		   	</div>
		   	<div class="basicButton">
		   		<div class="retourButton">
	   				<p:commandButton id="returnButton" immediate="true" action="comeback" ajax="false" value="#{resourceBundle['btn.retour']}" title="#{resourceBundle['btn.retour']}"/>
	   			</div>
	   		</div>
		</h:form>
		
		<div style="display:none;">
	   		<h:form id="hiddenForm" prependId="false">
	  			<p:commandButton id="editPharmacie" action="editPharmacie" ajax="false"/>
	  		</h:form>
		</div>		
	   	
     </ui:define>
     
</ui:composition>